modules:
  # ==========================================
  # JIRA MODULES
  # ==========================================

  # Main Sprint Dashboard - Project Page
  jira:projectPage:
    - key: sprint-strategist-dashboard
      title: Sprint Strategist
      resource: dashboard

  # ==========================================
  # ROVO AI AGENTS
  # ==========================================

  rovo:agent:
    - key: sprint-strategist-agent
      name: Sprint Strategist
      description: |
        Your AI-powered sprint advisor, inspired by F1 race strategy.
        Ask me about sprint health, blockers, predictions, and recommendations.
      prompt: |
        You are the Sprint Strategist, an AI assistant specialized in agile sprint management.
        You analyze sprint data, identify risks, and provide strategic recommendations.

        Your personality:
        - Think like an F1 race strategist - always looking ahead
        - Be proactive in identifying problems before they occur
        - Provide data-driven insights with actionable recommendations
        - Use racing terminology when appropriate (pit-stop, velocity, etc.)

        When responding:
        1. Always check current sprint health first
        2. Identify any blockers or risks
        3. Provide specific, actionable recommendations
        4. Reference data from Jira to support your analysis

    - key: standup-assistant-agent
      name: Standup Assistant
      description: |
        Automatically generates daily standup summaries from your Jira data.
        Save 15 minutes per standup!
      prompt: |
        You are the Standup Assistant, helping teams run efficient standups.
        Generate concise, actionable standup summaries based on Jira data.

        Format your responses as:
        - âœ… Completed Yesterday
        - ðŸ”„ In Progress Today
        - ðŸš« Blockers
        - ðŸ“Š Sprint Status

  # ==========================================
  # ROVO ACTIONS
  # ==========================================
  # TRIGGERS
  # ==========================================

  trigger:
    # Issue Events
    - key: issue-created-trigger
      function: issueCreatedHandler
      events:
        - avi:jira:created:issue

    - key: issue-updated-trigger
      function: issueUpdatedHandler
      events:
        - avi:jira:updated:issue

    # Sprint Events
    - key: sprint-started-trigger
      function: sprintStartedHandler
      events:
        - avi:jira:started:sprint

  # Scheduled Triggers
  scheduledTrigger:
    - key: daily-analysis-trigger
      function: dailyAnalysisHandler
      interval: day

    - key: health-check-trigger
      function: healthCheckHandler
      interval: hour

  # ==========================================
  # FUNCTIONS
  # ==========================================

  function:
    # Action Handlers
    - key: analyzeSprintHandler
      handler: index.analyzeSprintHandler

    - key: predictVelocityHandler
      handler: index.predictVelocityHandler

    - key: generateStandupHandler
      handler: index.generateStandupHandler

    - key: suggestPitStopHandler
      handler: index.suggestPitStopHandler

    - key: getSprintHealthHandler
      handler: index.getSprintHealthHandler

    - key: identifyBlockersHandler
      handler: index.identifyBlockersHandler

    # Trigger Handlers
    - key: issueCreatedHandler
      handler: index.issueCreatedHandler

    - key: issueUpdatedHandler
      handler: index.issueUpdatedHandler

    - key: sprintStartedHandler
      handler: index.sprintStartedHandler

    - key: dailyAnalysisHandler
      handler: index.dailyHandler

    - key: healthCheckHandler
      handler: index.healthCheckHandler

resources:
  - key: dashboard
    path: static/dashboard/build

# ==========================================
# APP CONFIGURATION
# ==========================================

app:
  id: ari:cloud:ecosystem::app/aa31a6b3-9ec1-49a6-a8e7-35eac7f402ee
  runtime:
    name: nodejs20.x

permissions:
  scopes:
    - read:jira-work
    - read:jira-user
    - write:jira-work
    - storage:app
    - read:sprint:jira-software
    - write:sprint:jira-software
    - read:issue-details:jira
    - read:jql:jira
    - read:board-scope:jira-software
    - read:project:jira
  external:
    fetch:
      backend:
        - api.anthropic.com
        - api.openai.com
